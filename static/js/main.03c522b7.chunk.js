(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/logo.77a82d5d.svg"},23:function(e,t,a){e.exports=a.p+"static/media/default.ed492c24.png"},34:function(e,t,a){e.exports=a(75)},39:function(e,t,a){},41:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(21),l=a.n(r),o=(a(39),a(10)),i=a(3),s=a.n(i),u=a(5),m=a(2),d=(a(41),a(6)),p=Object(n.createContext)(null),f=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],l=a[1],o=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("https://coding-challenge-api.aerolab.co/user/me",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTJiNjY4ODVjMmY5ODAwNmQ0YzQ4YjIiLCJpYXQiOjE1Nzk5MDI2MDB9.ur63hbTPSUo4-JsdQc7d9ldLFW-IGuJkSnRjm0mo2VE"}});case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),c.a.createElement(p.Provider,{value:[r,l]},e.children)},E=(a(59),a(8)),b=a.n(E),j=a(22),h=a.n(j),v=function(e){var t=Object(n.useContext)(p),a=Object(m.a)(t,2),r=a[0];a[1];return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav__logo"},c.a.createElement("img",{className:"scale-in-center",src:h.a})),c.a.createElement("ul",null,c.a.createElement("li",{className:"nav__user"}," ",c.a.createElement("h3",{className:"scale-in-center"},r.name),"   "),c.a.createElement("li",{className:"nav__points scale-in-center"},"  ",c.a.createElement("h3",{className:""}," ",r.points," ")," ",c.a.createElement("img",{className:"",src:b.a})," ")))},O=(a(60),a(23)),N=a.n(O),g=a(25),_=(a(61),a(6)),I=function(e){var t=e.product,a=Object(n.useContext)(p),r=Object(m.a)(a,2),l=r[0],o=r[1],i=Object(n.useState)(!1),d=Object(m.a)(i,2),f=(d[0],d[1]),E=Object(n.useState)(!1),j=Object(m.a)(E,2),h=j[0],v=j[1],O=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(l.points>=t.cost)){e.next=4;break}return e.next=4,_({method:"post",url:"https://coding-challenge-api.aerolab.co/redeem",data:{productId:t._id},headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTJiNjY4ODVjMmY5ODAwNmQ0YzQ4YjIiLCJpYXQiOjE1Nzk5MDI2MDB9.ur63hbTPSUo4-JsdQc7d9ldLFW-IGuJkSnRjm0mo2VE"}}).then((function(e){var a=l.points-t.cost,n=Object(g.a)({},l);n.points=a,o(n),f(!0),v(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,l.points<t.cost&&c.a.createElement("div",{className:"card__inactive card__item"},c.a.createElement("div",{className:"card__details"},c.a.createElement("div",{className:"card__points"},c.a.createElement("h3",null,t.cost," ")," ",c.a.createElement("img",{src:b.a})),c.a.createElement("button",{disabled:!0},"You can\xb4t redeem"),c.a.createElement("p",{className:"alert__points"}," You need ",t.cost-l.points," points"))),l.points>=t.cost&&c.a.createElement("div",{className:"card__active card__item",onClick:function(e){return O(e)}},!h&&c.a.createElement("div",{className:"card__details"},c.a.createElement("div",{className:"card__points"},c.a.createElement("h3",null,t.cost," ")," ",c.a.createElement("img",{src:b.a})),c.a.createElement("button",null,"Reedem now")))))},w=a(9),C=a(7),k=a(24),J=a.n(k);w.b.registerPlugin(C.a);a(6);var y=function(e){var t=e.productsState,a=(e.animateProduct,Object(n.useContext)(p)),r=Object(m.a)(a,2),l=r[0],i=(r[1],Object(n.useRef)(Object(o.a)(t).map((function(){return Object(n.createRef)()})))),s=Object(n.useState)(!1),u=Object(m.a)(s,2),d=u[0],f=u[1],E=Object(n.useState)(""),b=Object(m.a)(E,2),j=b[0],h=b[1],v=Object(n.useRef)(),O=Object(n.useState)(!1),g=Object(m.a)(O,2),_=g[0],C=g[1];Object(n.useEffect)((function(){!1!==_?(v.current.style.pointerEvents="all",w.a.to(v.current,.5,{opacity:1}),setTimeout((function(){k()}),3e3),console.log("User points updated:"+l.points)):console.log("User points not updated:"+l.points)}),[l]);function k(){v.current.style.pointerEvents="none",w.a.to(v.current,.5,{opacity:0,onComplete:function(){}})}return c.a.createElement("ul",{className:"products"},c.a.createElement("div",{className:"success ",onClick:function(e){e.preventDefault(),k()},ref:v}," ",c.a.createElement("h1",null,"Product Redeem! ",c.a.createElement("br",null)," You have now ",l.points," points")),t.map((function(e,t){return c.a.createElement(c.a.Fragment,{key:e._id},c.a.createElement("li",{className:"products__item",onClick:function(e){C(!0)},onMouseEnter:function(t){return function(e,t){f(!0),h(e._id)}(e)},onMouseLeave:function(t){return function(e,t){f(!1),h(e._id)}(e)}},d&&j===e._id&&c.a.createElement(I,{product:e}),c.a.createElement("div",{className:"message",ref:i.current[e._id]}),c.a.createElement("div",{className:"products__details"},c.a.createElement("figure",null,c.a.createElement(J.a,{src:e.img.url,className:"products__img scale-in-center",unloader:c.a.createElement("img",{className:"products__default",src:N.a})})),c.a.createElement("div",{className:"products__title "},c.a.createElement("p",null,e.category),c.a.createElement("h3",null,e.name),c.a.createElement("p",null,c.a.createElement("b",null,e.cost)," points")))))})))},x=a(6),S=Object(n.createContext)(null),Y=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],l=a[1],o=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("https://coding-challenge-api.aerolab.co/products",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTJiNjY4ODVjMmY5ODAwNmQ0YzQ4YjIiLCJpYXQiOjE1Nzk5MDI2MDB9.ur63hbTPSUo4-JsdQc7d9ldLFW-IGuJkSnRjm0mo2VE"}});case 2:return t=e.sent,e.next=5,t.data;case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),c.a.createElement(S.Provider,{value:[r,l]},e.children)},Q=function(e){var t=e.allItems,a=e.currentItems,r=Object(n.useContext)(S),l=Object(m.a)(r,2);l[0],l[1];return c.a.createElement("p",null,a," of ",t," products ")},z=function(e){return c.a.createElement("div",{className:"banner"})},D=a(1),M=a(6),A=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)("recent"),d=Object(m.a)(i,2),p=d[0],E=d[1],b=Object(n.useState)(10),j=Object(m.a)(b,2),h=j[0],O=j[1],N=Object(n.useState)(""),g=Object(m.a)(N,2),_=g[0],I=g[1],w=Object(n.useState)(!1),C=Object(m.a)(w,2),k=C[0],J=C[1],x=Object(n.useState)(!0),S=Object(m.a)(x,2),A=S[0],R=S[1],T=Object(n.useState)(1),P=Object(m.a)(T,2),V=P[0],L=P[1],U=Object(n.useState)([]),W=Object(m.a)(U,2),B=W[0],G=W[1],X=Object(n.useState)(!1),F=Object(m.a)(X,2),Z=F[0],H=F[1];Object(n.useEffect)((function(){q()}),[]),Object(n.useEffect)((function(){var e=r.slice(10*V-10,10*V);G(e)}),[V,r]);var $=function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=B.length,"prev"==t&&(I("prev"),n>0&&(O(h-n),L(V-1))),"next"==t&&(I("next"),n>0&&L(V+1));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=B.length;if(0===e&&L(1),"initial"==_&&(J(!1),R(!0)),"next"===_){var t=h+e;O(t),t===r.length?J(!0):R(!1)}"prev"===_&&(h<=10?(R(!0),J(!1)):(R(!1),J(!1)));var a=new D.c({paused:!1});a.set(document.getElementsByClassName("products__item"),{autoAlpha:0,y:-20}),a.staggerTo(document.getElementsByClassName("products__item"),1,{autoAlpha:1,y:0},.1)}),[B]);var q=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("https://coding-challenge-api.aerolab.co/products",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTJiNjY4ODVjMmY5ODAwNmQ0YzQ4YjIiLCJpYXQiOjE1Nzk5MDI2MDB9.ur63hbTPSUo4-JsdQc7d9ldLFW-IGuJkSnRjm0mo2VE"}});case 2:return t=e.sent,e.next=5,t.data;case 5:a=e.sent,I("initial"),E("recent"),L(1),O(10),l(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=Object(o.a)(r).sort((function(e,t){return e.cost-t.cost}));I("initial"),E("lower"),L(1),O(10),l(t),H(!0)},ee=function(e){var t=Object(o.a)(r).sort((function(e,t){return t.cost-e.cost}));I("initial"),E("highest"),L(1),O(10),l(t)};return c.a.createElement(f,null,c.a.createElement(Y,null,c.a.createElement("div",{className:"App"},c.a.createElement(v,null),c.a.createElement(z,null),c.a.createElement("main",null,c.a.createElement("section",{className:"container"},c.a.createElement("ul",{className:"container__search"},c.a.createElement("li",null,c.a.createElement(Q,{allItems:r.length,currentItems:h})),c.a.createElement("li",null,c.a.createElement("div",{className:"container__filters"},c.a.createElement("p",null,"Sort by: "),c.a.createElement("ul",null,"recent"===p&&c.a.createElement("li",{className:"active jello-horizontal disabled",onClick:q},"Most Recent"),"recent"!=p&&c.a.createElement("li",{className:"hvr-grow",onClick:q},"Most Recent"),"lower"===p&&c.a.createElement("li",{className:"active jello-horizontal disabled",onClick:K},"Lower Price"),"lower"!=p&&c.a.createElement("li",{className:"hvr-grow",onClick:K},"Lower Price"),"highest"===p&&c.a.createElement("li",{className:"active jello-horizontal disabled",onClick:ee},"Highest Price"),"highest"!=p&&c.a.createElement("li",{className:"hvr-grow",onClick:ee},"Highest Price"))),c.a.createElement("ul",{className:"pagination"},c.a.createElement("button",{disabled:A,className:A?"hidden arrow round":"arrow round ",onClick:function(e){return $("prev",e)}},"\u2039"),c.a.createElement("button",{disabled:k,className:k?"hidden arrow round":"arrow round",onClick:function(e){return $("next",e)}},"\u203a")))),c.a.createElement(y,{className:"hvr-grow",productsState:B,animation:Z}),c.a.createElement("ul",{className:"footer"},c.a.createElement("li",null," ",c.a.createElement("p",null,h," of ",r.length," products ")," "),c.a.createElement("li",null,c.a.createElement("ul",{className:"pagination"},c.a.createElement("button",{disabled:A,className:A?"hidden arrow round":"arrow round",onClick:function(e){return $("prev",e)}},"\u2039"),c.a.createElement("button",{disabled:k,className:k?"hidden arrow round":"arrow round",onClick:function(e){return $("next",e)}},"\u203a")))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){e.exports=a.p+"static/media/money.dec62e66.svg"}},[[34,1,2]]]);
//# sourceMappingURL=main.03c522b7.chunk.js.map